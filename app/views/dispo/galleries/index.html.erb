<main class="dispo-gallery">
  <header class="dispo-gallery__header">
    <h1>Disposable Camera Gallery</h1>
  </header>

  <% if @photos.empty? %>
    <p class="dispo-gallery__empty">No photos yet. Be the first to take one.</p>
  <% else %>
    <section class="dispo-gallery__grid">
      <% @photos.each do |photo| %>
        <article class="dispo-gallery__item">
          <img
            src="<%= DisposableCamera::StorageClient.public_url_for(photo.object_key) %>"
            alt="Disposable camera guest photo"
            loading="lazy"
          >
          <p>
            <%= photo.captured_at.in_time_zone("America/Los_Angeles").strftime("%b %-d, %Y %l:%M %p") %>
            <% if photo.flash_enabled? %>
              · Flash On
            <% end %>
          </p>
        </article>
      <% end %>
    </section>

    <div class="flex justify-between items-center gap-3 mt-5 flex-wrap">
      <p class="text-sm m-0 text-stone-300">
        Page <%= @page %> of <%= @total_pages %> · <%= pluralize(@total_photos, "photo") %>
      </p>
      <div class="flex items-center gap-2">
        <% if @has_previous_page %>
          <%= link_to "Previous",
                      dispo_gallery_path(page: @page - 1, per_page: @per_page),
                      class: "dispo-camera-link" %>
        <% end %>
        <% if @has_next_page %>
          <%= link_to "Next",
                      dispo_gallery_path(page: @page + 1, per_page: @per_page),
                      class: "dispo-camera-link" %>
        <% end %>
      </div>
    </div>
  <% end %>
</main>
