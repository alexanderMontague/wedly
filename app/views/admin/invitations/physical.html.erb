<div class="flex gap-2 mb-6 border-b border-border pb-2">
  <%= link_to "Send by Email", admin_invitations_path,
      class: "px-4 py-2 rounded-md no-underline font-medium text-secondary hover:bg-neutral-100" %>
  <%= link_to "Physical Invitations", physical_admin_invitations_path,
      class: "px-4 py-2 rounded-md no-underline font-medium bg-secondary text-white" %>
</div>

<div class="card">
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8">
    <h1>Physical Invitation Builder</h1>
    <%= link_to "Print All Invitations", physical_print_admin_invitations_path,
        class: "btn btn-primary",
        target: "_blank",
        rel: "noopener" %>
  </div>

  <% if @households.any? %>
    <%= form_with url: physical_admin_invitations_path, method: :get, class: "mb-8" do |f| %>
      <div class="form-group">
        <label for="household_id">Preview with household</label>
        <div class="flex gap-4 items-end">
          <%= f.select :household_id,
              options_from_collection_for_select(@households, :id, :display_name, @household&.id),
              { include_blank: "Select household..." },
              { class: "form-control max-w-md", onchange: "this.form.submit()" } %>
          <%= f.submit "Update Preview", class: "btn btn-secondary btn-sm" %>
        </div>
      </div>
    <% end %>

    <div class="invitation-preview w-full flex flex-col lg:flex-row gap-12 items-stretch lg:items-start">
      <div class="flex-1 min-w-0 flex flex-col gap-3">
        <p class="text-xs font-semibold tracking-wider uppercase text-stone-500">Front</p>
        <div class="border border-stone-200 rounded-lg overflow-hidden shadow-card w-full">
          <%= render "invitation_front", household: @household if @household %>
        </div>
      </div>
      <div class="flex-1 min-w-0 flex flex-col gap-3">
        <p class="text-xs font-semibold tracking-wider uppercase text-stone-500">Back</p>
        <div class="border border-stone-200 rounded-lg overflow-hidden shadow-card w-full">
          <%= render "invitation_back", household: @household if @household %>
        </div>
      </div>
    </div>
    <p class="mt-4 text-sm text-stone-500">
      <%= @households.count %> invitation<%= "s" if @households.count != 1 %> (one per household)
    </p>
  <% else %>
    <p class="text-stone-600">No households found. Add households and guests to preview physical invitations.</p>
  <% end %>
</div>
